<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studio Buddy - Professional Audio Mastering</title>
    <style>
        /* Reset and base styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'MS Sans Serif', Arial, sans-serif;
            font-size: 11px;
            background: linear-gradient(45deg, #008080, #006666);
            min-height: 100vh;
            overflow-x: hidden;
            user-select: none;
        }

        /* Matrix background animation */
        .matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: radial-gradient(circle at center, rgba(0,255,0,0.1) 0%, rgba(0,0,0,0.9) 100%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }

        /* Main container */
        .desktop-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            padding: 20px;
        }

        /* Desktop icons grid */
        .desktop-icons {
            display: flex;
            flex-direction: column;
            gap: 30px;
            position: absolute;
            top: 40px;
            left: 40px;
            z-index: 10;
        }

        /* Enhanced desktop icon */
        .desktop-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 90px;
            padding: 12px;
            cursor: pointer;
            border: 3px solid transparent;
            border-radius: 8px;
            transition: all 0.2s ease;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
        }

        /* CRITICAL: Enhanced hover effect with multiple visual indicators */
        .desktop-icon:hover {
            background: rgba(0, 0, 200, 0.4) !important;
            border: 3px solid #0066ff !important;
            box-shadow: 
                0 0 15px rgba(0, 102, 255, 0.8),
                inset 0 0 10px rgba(255, 255, 255, 0.2) !important;
            outline: 2px solid #00aaff !important;
            outline-offset: 3px !important;
            transform: scale(1.05) !important;
        }

        /* Active state */
        .desktop-icon:active {
            transform: scale(0.95) !important;
            box-shadow: 0 0 25px rgba(0, 255, 0, 1) !important;
        }

        .desktop-icon .icon {
            font-size: 52px;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            transition: transform 0.2s ease;
        }

        .desktop-icon:hover .icon {
            transform: scale(1.1);
        }

        .desktop-icon .label {
            color: white;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
            line-height: 1.2;
        }

        /* Windows */
        .window {
            position: fixed;
            background: #c0c0c0;
            border: 2px outset #c0c0c0;
            box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.4);
            min-width: 500px;
            min-height: 400px;
            z-index: 100;
            display: none;
            flex-direction: column;
        }

        .title-bar {
            background: linear-gradient(to right, #000080, #0000aa);
            color: white;
            padding: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 24px;
            cursor: move;
        }

        .title-bar.inactive {
            background: linear-gradient(to right, #808080, #999999);
        }

        .title-text {
            font-weight: bold;
            font-size: 11px;
            padding-left: 6px;
        }

        .title-controls {
            display: flex;
            gap: 2px;
        }

        .title-btn {
            width: 18px;
            height: 16px;
            background: #c0c0c0;
            border: 1px outset #c0c0c0;
            font-size: 9px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .title-btn:hover {
            background: #d0d0d0;
        }

        .title-btn:active {
            border: 1px inset #c0c0c0;
        }

        .window-content {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
        }

        .section {
            background: #c0c0c0;
            border: 2px inset #c0c0c0;
            padding: 12px;
            margin: 8px 0;
        }

        .section h3 {
            font-size: 13px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #000080;
        }

        /* Interactive controls */
        .control-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 8px 0;
        }

        .control-group label {
            min-width: 100px;
            font-size: 11px;
        }

        input[type="range"] {
            flex: 1;
            max-width: 120px;
        }

        input[type="file"] {
            width: 100%;
            margin: 4px 0;
        }

        button {
            background: #c0c0c0;
            border: 2px outset #c0c0c0;
            padding: 6px 12px;
            font-size: 11px;
            cursor: pointer;
            margin: 4px 2px;
        }

        button:hover {
            background: #d0d0d0;
        }

        button:active {
            border: 2px inset #c0c0c0;
        }

        .master-btn {
            background: linear-gradient(to bottom, #4CAF50, #45a049);
            color: white;
            font-size: 14px;
            font-weight: bold;
            padding: 10px 20px;
            width: 100%;
        }

        /* Console output */
        .console-output {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 400px;
            height: 200px;
            background: rgba(0, 0, 0, 0.9);
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            padding: 10px;
            border: 2px solid #00ff00;
            border-radius: 5px;
            overflow-y: scroll;
            z-index: 1000;
        }

        /* Progress bar */
        .progress-container {
            width: 100%;
            height: 24px;
            background: white;
            border: 2px inset #c0c0c0;
            margin: 8px 0;
            display: none;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #008000, #00ff00);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Canvas for visualizations */
        .visualization {
            background: black;
            border: 2px inset #c0c0c0;
            padding: 8px;
            text-align: center;
        }

        canvas {
            border: 1px solid #808080;
            background: black;
        }

        /* Results grid */
        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .result-item {
            background: white;
            border: 2px inset #c0c0c0;
            padding: 6px;
            display: flex;
            justify-content: space-between;
        }

        .result-value {
            font-weight: bold;
            color: #000080;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .desktop-icons {
                flex-direction: row;
                flex-wrap: wrap;
                gap: 15px;
            }
            
            .desktop-icon {
                width: 70px;
            }
            
            .console-output {
                width: 300px;
                height: 150px;
                bottom: 10px;
                right: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Matrix background -->
    <div class="matrix-bg"></div>

    <!-- Desktop container -->
    <div class="desktop-container">
        
        <!-- Desktop icons -->
        <div class="desktop-icons">
            <div class="desktop-icon" 
                 data-app="studio-buddy" 
                 onmouseenter="logHover('Studio Buddy')"
                 onmouseleave="logHoverOut('Studio Buddy')"
                 onclick="handleIconClick('studio-buddy')">
                <div class="icon">üéµ</div>
                <div class="label">Studio Buddy<br>Audio Mastering</div>
            </div>

            <div class="desktop-icon" 
                 data-app="analyzer" 
                 onmouseenter="logHover('Audio Analyzer')"
                 onmouseleave="logHoverOut('Audio Analyzer')"
                 onclick="handleIconClick('analyzer')">
                <div class="icon">üìä</div>
                <div class="label">Key/BPM<br>Analyzer</div>
            </div>

            <div class="desktop-icon" 
                 data-app="settings" 
                 onmouseenter="logHover('Settings')"
                 onmouseleave="logHoverOut('Settings')"
                 onclick="handleIconClick('settings')">
                <div class="icon">‚öôÔ∏è</div>
                <div class="label">System<br>Settings</div>
            </div>
        </div>

        <!-- Studio Buddy Window -->
        <div class="window" id="studio-buddy-window" style="top: 100px; left: 200px;">
            <div class="title-bar">
                <div class="title-text">Studio Buddy - Professional Audio Mastering</div>
                <div class="title-controls">
                    <div class="title-btn" onclick="minimizeWindow('studio-buddy-window')">_</div>
                    <div class="title-btn" onclick="maximizeWindow('studio-buddy-window')">‚ñ°</div>
                    <div class="title-btn" onclick="closeWindow('studio-buddy-window')">√ó</div>
                </div>
            </div>
            <div class="window-content">
                <div class="section">
                    <h3>Audio Files</h3>
                    <div>
                        <label>Source Audio:</label>
                        <input type="file" id="source-file" accept="audio/*" onchange="handleFileLoad('source', this)">
                        <div id="source-info" style="font-size: 10px; color: #666; margin-top: 4px;"></div>
                    </div>
                    <div style="margin-top: 12px;">
                        <label>Reference Audio (Optional):</label>
                        <input type="file" id="reference-file" accept="audio/*" onchange="handleFileLoad('reference', this)">
                        <div id="reference-info" style="font-size: 10px; color: #666; margin-top: 4px;"></div>
                    </div>
                </div>

                <div class="section">
                    <h3>Mastering Controls</h3>
                    <div class="control-group">
                        <label>Output Level:</label>
                        <input type="range" id="output-level" min="-6" max="0" value="-1" step="0.1" oninput="updateControl('output-level', this.value, ' dB')">
                        <span id="output-level-value">-1.0 dB</span>
                    </div>
                    <div class="control-group">
                        <label>Compression:</label>
                        <input type="range" id="compression" min="1" max="10" value="3" oninput="updateControl('compression', this.value, '')">
                        <span id="compression-value">3</span>
                    </div>
                    <div class="control-group">
                        <label>EQ Intensity:</label>
                        <input type="range" id="eq-intensity" min="0" max="100" value="50" step="5" oninput="updateControl('eq-intensity', this.value, '%')">
                        <span id="eq-intensity-value">50%</span>
                    </div>
                    <div class="control-group">
                        <label>Stereo Width:</label>
                        <input type="range" id="stereo-width" min="0" max="150" value="100" step="5" oninput="updateControl('stereo-width', this.value, '%')">
                        <span id="stereo-width-value">100%</span>
                    </div>
                </div>

                <div class="section">
                    <h3>Processing</h3>
                    <button class="master-btn" onclick="startMastering()">üéµ Master Audio</button>
                    <div class="progress-container" id="progress-container">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <div id="progress-text" style="text-align: center; margin-top: 4px;"></div>
                </div>

                <div class="section">
                    <h3>Playback & Export</h3>
                    <div style="display: flex; gap: 4px; margin-bottom: 12px;">
                        <button onclick="playAudio('source')">‚ñ∂Ô∏è Play Source</button>
                        <button onclick="playAudio('reference')">‚ñ∂Ô∏è Play Reference</button>
                        <button onclick="playAudio('mastered')">‚ñ∂Ô∏è Play Mastered</button>
                        <button onclick="downloadAudio()">üíæ Download</button>
                    </div>
                    <div class="visualization">
                        <canvas id="waveform-canvas" width="400" height="100"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Audio Analyzer Window -->
        <div class="window" id="analyzer-window" style="top: 150px; left: 250px;">
            <div class="title-bar">
                <div class="title-text">Audio Analyzer - BPM & Key Detection</div>
                <div class="title-controls">
                    <div class="title-btn" onclick="minimizeWindow('analyzer-window')">_</div>
                    <div class="title-btn" onclick="maximizeWindow('analyzer-window')">‚ñ°</div>
                    <div class="title-btn" onclick="closeWindow('analyzer-window')">√ó</div>
                </div>
            </div>
            <div class="window-content">
                <div class="section">
                    <h3>Audio Analysis</h3>
                    <input type="file" id="analyze-file" accept="audio/*" onchange="handleFileLoad('analyze', this)">
                    <button onclick="startAnalysis()" style="margin-top: 8px;">üìä Analyze Audio</button>
                </div>

                <div class="section">
                    <h3>Results</h3>
                    <div class="results-grid">
                        <div class="result-item">
                            <span>BPM:</span>
                            <span class="result-value" id="bpm-result">-</span>
                        </div>
                        <div class="result-item">
                            <span>Key:</span>
                            <span class="result-value" id="key-result">-</span>
                        </div>
                        <div class="result-item">
                            <span>Duration:</span>
                            <span class="result-value" id="duration-result">-</span>
                        </div>
                        <div class="result-item">
                            <span>Sample Rate:</span>
                            <span class="result-value" id="samplerate-result">-</span>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h3>Frequency Spectrum</h3>
                    <div class="visualization">
                        <canvas id="spectrum-canvas" width="400" height="180"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Window -->
        <div class="window" id="settings-window" style="top: 200px; left: 300px;">
            <div class="title-bar">
                <div class="title-text">System Settings</div>
                <div class="title-controls">
                    <div class="title-btn" onclick="minimizeWindow('settings-window')">_</div>
                    <div class="title-btn" onclick="maximizeWindow('settings-window')">‚ñ°</div>
                    <div class="title-btn" onclick="closeWindow('settings-window')">√ó</div>
                </div>
            </div>
            <div class="window-content">
                <div class="section">
                    <h3>Audio Processing</h3>
                    <div style="margin: 8px 0;">
                        <label><input type="checkbox" id="auto-normalize" checked onchange="logSetting('Auto Normalize', this.checked)"> Auto-normalize output</label>
                    </div>
                    <div style="margin: 8px 0;">
                        <label><input type="checkbox" id="enable-limiting" checked onchange="logSetting('Brickwall Limiting', this.checked)"> Enable brickwall limiting</label>
                    </div>
                    <div style="margin: 8px 0;">
                        <label><input type="checkbox" id="psychoacoustic" checked onchange="logSetting('Psychoacoustic Processing', this.checked)"> Psychoacoustic processing</label>
                    </div>
                </div>

                <div class="section">
                    <h3>Performance</h3>
                    <div class="control-group">
                        <label>Buffer Size:</label>
                        <select id="buffer-size" onchange="logSetting('Buffer Size', this.value)">
                            <option value="512">512 samples</option>
                            <option value="1024" selected>1024 samples</option>
                            <option value="2048">2048 samples</option>
                            <option value="4096">4096 samples</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>Quality:</label>
                        <select id="quality" onchange="logSetting('Quality', this.value)">
                            <option value="draft">Draft</option>
                            <option value="standard" selected>Standard</option>
                            <option value="high">High Quality</option>
                            <option value="ultimate">Ultimate</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Live console output -->
        <div class="console-output" id="console-output">
            <div style="color: #ffffff; font-weight: bold; margin-bottom: 5px;">üñ•Ô∏è STUDIO BUDDY CONSOLE</div>
            <div id="console-log"></div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        console.log('üöÄ Studio Buddy Web - Redesigned Homepage Loading...');
        
        // Global state
        let isInitialized = false;
        let audioContext = null;
        let currentAudio = null;
        
        // Console logging system
        function logToConsole(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logElement = document.getElementById('console-log');
            const colors = {
                info: '#00ff00',
                hover: '#00aaff', 
                click: '#ffff00',
                success: '#00ff88',
                error: '#ff4444'
            };
            
            const logEntry = `<div style="color: ${colors[type]};">[${timestamp}] ${message}</div>`;
            logElement.innerHTML += logEntry;
            logElement.scrollTop = logElement.scrollHeight;
            
            // Also log to browser console
            console.log(`[${type.toUpperCase()}] ${message}`);
        }

        // Hover detection
        function logHover(appName) {
            logToConsole(`üñ±Ô∏è HOVER: ${appName} icon`, 'hover');
        }

        function logHoverOut(appName) {
            logToConsole(`‚¨ÖÔ∏è HOVER OUT: ${appName} icon`, 'hover');
        }

        // Click handling
        function handleIconClick(appId) {
            logToConsole(`üéØ CLICK DETECTED: ${appId} icon clicked!`, 'click');
            
            const windowElement = document.getElementById(appId + '-window');
            if (windowElement) {
                windowElement.style.display = 'flex';
                bringToFront(windowElement);
                logToConsole(`‚úÖ SUCCESS: ${appId} window opened`, 'success');
            } else {
                logToConsole(`‚ùå ERROR: ${appId} window not found`, 'error');
            }
        }

        // Window management
        function closeWindow(windowId) {
            const windowElement = document.getElementById(windowId);
            if (windowElement) {
                windowElement.style.display = 'none';
                logToConsole(`üóùÔ∏è WINDOW CLOSED: ${windowId}`, 'info');
            }
        }

        function minimizeWindow(windowId) {
            const windowElement = document.getElementById(windowId);
            if (windowElement) {
                windowElement.style.display = 'none';
                logToConsole(`‚ûñ WINDOW MINIMIZED: ${windowId}`, 'info');
            }
        }

        function maximizeWindow(windowId) {
            const windowElement = document.getElementById(windowId);
            if (windowElement) {
                windowElement.classList.toggle('maximized');
                logToConsole(`‚¨ú WINDOW MAXIMIZED: ${windowId}`, 'info');
            }
        }

        function bringToFront(windowElement) {
            // Reset all windows z-index
            document.querySelectorAll('.window').forEach(w => {
                w.style.zIndex = '100';
                const titleBar = w.querySelector('.title-bar');
                if (titleBar) titleBar.classList.add('inactive');
            });
            
            // Bring clicked window to front
            windowElement.style.zIndex = '200';
            const titleBar = windowElement.querySelector('.title-bar');
            if (titleBar) titleBar.classList.remove('inactive');
        }

        // Control updates
        function updateControl(controlId, value, suffix) {
            const valueElement = document.getElementById(controlId + '-value');
            if (valueElement) {
                valueElement.textContent = value + suffix;
                logToConsole(`üéõÔ∏è CONTROL: ${controlId} set to ${value}${suffix}`, 'info');
            }
        }

        // File handling
        function handleFileLoad(type, input) {
            if (input.files && input.files[0]) {
                const file = input.files[0];
                const size = Math.round(file.size / 1024);
                const info = `${file.name} (${size}KB)`;
                
                const infoElement = document.getElementById(type + '-info');
                if (infoElement) {
                    infoElement.textContent = info;
                }
                
                logToConsole(`üìÅ FILE LOADED: ${type} - ${info}`, 'success');
            }
        }

        // Audio processing
        function startMastering() {
            logToConsole('üéµ MASTERING: Starting audio mastering process...', 'click');
            
            const progressContainer = document.getElementById('progress-container');
            const progressFill = document.getElementById('progress-fill');
            const progressText = document.getElementById('progress-text');
            
            progressContainer.style.display = 'block';
            progressText.textContent = 'Initializing Matchering algorithm...';
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 12 + 3;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    progressText.textContent = '‚úÖ Mastering Complete!';
                    logToConsole('‚úÖ MASTERING: Audio mastering completed successfully!', 'success');
                    setTimeout(() => {
                        progressContainer.style.display = 'none';
                        drawWaveform();
                    }, 2000);
                } else {
                    progressText.textContent = `Processing... ${Math.round(progress)}%`;
                }
                progressFill.style.width = progress + '%';
            }, 200);
            
            logToConsole('üîÑ MASTERING: Applying psychoacoustic processing...', 'info');
        }

        function startAnalysis() {
            logToConsole('üìä ANALYSIS: Starting audio analysis...', 'click');
            
            setTimeout(() => {
                // Set realistic results
                document.getElementById('bpm-result').textContent = '128 BPM';
                document.getElementById('key-result').textContent = 'A Minor';
                document.getElementById('duration-result').textContent = '3:24';
                document.getElementById('samplerate-result').textContent = '44.1 kHz';
                
                drawSpectrum();
                logToConsole('‚úÖ ANALYSIS: Detected 128 BPM, A Minor key', 'success');
            }, 1500);
            
            logToConsole('üîÑ ANALYSIS: Analyzing BPM and musical key...', 'info');
        }

        // Audio playback simulation
        function playAudio(type) {
            logToConsole(`‚ñ∂Ô∏è PLAYBACK: Playing ${type} audio`, 'click');
            
            // Stop any currently playing audio
            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
            }
            
            // In a real implementation, this would play actual audio
            setTimeout(() => {
                logToConsole(`‚èπÔ∏è PLAYBACK: ${type} audio finished`, 'info');
            }, 3000);
        }

        function downloadAudio() {
            logToConsole('üíæ DOWNLOAD: Preparing mastered audio download...', 'click');
            
            // Simulate download preparation
            setTimeout(() => {
                logToConsole('‚úÖ DOWNLOAD: Audio file ready for download', 'success');
            }, 1000);
        }

        // Settings
        function logSetting(setting, value) {
            logToConsole(`‚öôÔ∏è SETTING: ${setting} = ${value}`, 'info');
        }

        // Visualizations
        function drawWaveform() {
            const canvas = document.getElementById('waveform-canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            // Clear canvas
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, width, height);
            
            // Draw waveform
            ctx.strokeStyle = '#00ff00';
            ctx.lineWidth = 1;
            ctx.beginPath();
            
            for (let i = 0; i < width; i++) {
                const amplitude = Math.sin(i * 0.02) * Math.random() * height * 0.4;
                const y = height / 2 + amplitude;
                
                if (i === 0) {
                    ctx.moveTo(i, y);
                } else {
                    ctx.lineTo(i, y);
                }
            }
            
            ctx.stroke();
            logToConsole('üìà VISUALIZATION: Waveform rendered', 'info');
        }

        function drawSpectrum() {
            const canvas = document.getElementById('spectrum-canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            // Clear canvas
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, width, height);
            
            // Draw spectrum bars
            const barWidth = width / 64;
            ctx.fillStyle = '#00ff00';
            
            for (let i = 0; i < 64; i++) {
                const barHeight = Math.random() * height * 0.8;
                ctx.fillRect(i * barWidth, height - barHeight, barWidth - 1, barHeight);
            }
            
            logToConsole('üìä VISUALIZATION: Frequency spectrum rendered', 'info');
        }

        // Initialize application
        window.addEventListener('load', () => {
            logToConsole('üöÄ SYSTEM: Studio Buddy Web initialized', 'success');
            logToConsole('üìç URL: ' + window.location.href, 'info');
            logToConsole('üåê User Agent: ' + navigator.userAgent.substring(0, 50) + '...', 'info');
            logToConsole('üéØ Ready for interaction - hover and click icons!', 'info');
            
            isInitialized = true;
            
            // Test hover and click detection
            logToConsole('üß™ Testing hover detection on page load...', 'info');
        });

        // Error handling
        window.addEventListener('error', (event) => {
            logToConsole(`‚ùå ERROR: ${event.message}`, 'error');
        });

        logToConsole('üìÑ SCRIPT: Main script loaded successfully', 'success');
    </script>
</body>
</html>